<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/iron-pages/iron-pages.html">
<link rel="import" href="melon.html">

<dom-module id="sl-organ">
  <template>
    <style include="melon"></style>
    <style>
      :host {
        display: block;
        position: relative;
      }
      svg{
        transform-origin: 0% 0%;
        position: absolute;
      }
    </style>
    <iron-pages
        id="pages"
        selected="[[type]]"
        attr-for-selected="id"
        fallback-selection="head"
        on-tap="_organClicked"
        role="main">
        <svg
           id="head"
           width="26.59478mm"
           height="32.691509mm">

          <g
             inkscape:label="Layer 1"
             inkscape:groupmode="layer"
             id="layer1"
             transform="translate(-50.026116,-60.158462)">
            <g
               transform="translate(-111.09043,-88.659066)"
               id="g6154">
              <path
                 sodipodi:nodetypes="csscsssssscssscscscscssc"
                 inkscape:connector-curvature="0"
                 id="path4266"
                 d="m 163.01337,225.67861 c 0,0 8.19907,0.0987 14.01586,-2.52538 15.1464,-6.83276 21.05283,-14.47435 27.18746,-26.83032 5.39825,-10.87279 9.30431,-18.11621 9.30431,-18.11621 0,0 0.75761,-3.9196 -3.66181,-10.10678 -4.41942,-6.18719 -6.81853,-5.80838 -7.82868,-9.84899 -1.01015,-4.04061 -1.13642,-6.56599 1.38896,-8.33376 2.52538,-1.76776 7.82868,0.75762 13.13198,3.283 5.3033,2.52538 13.63706,9.34391 13.76333,9.34391 0.12627,0 2.39911,-2.65165 9.21764,-6.18718 6.81853,-3.53554 6.43973,-2.65165 6.43973,-2.65165 0,0 6.69226,16.79378 8.20748,24.49619 1.51523,7.70242 0.12627,35.86042 -1.01015,44.19418 -1.13642,8.33376 -2.39911,17.04632 -4.16688,25.63262 -1.76776,8.5863 -3.40926,16.03617 -3.40926,16.03617 0,0 -8.5863,-1.76777 -14.39468,-2.90419 -5.80837,-1.13642 -40.4061,-10.85914 -40.4061,-10.85914 0,0 -9.59645,-1.51523 -14.77348,-1.6415 -5.17703,-0.12626 -2.27284,-2.77791 -2.27284,-2.77791 0,0 -2.27285,-1.51523 -6.69226,-2.65166 -4.41942,-1.13642 -2.27285,-0.50507 -2.27285,-0.50507 0,0 0.12627,-0.88389 -1.26269,-3.03046 -1.38896,-2.14657 -1.76776,-5.05076 -1.89403,-7.70241 -0.12627,-2.65165 1.38896,-6.31346 1.38896,-6.31346 z"
                 style$="opacity:1;fill:[[color]];fill-opacity:0.66842101;fill-rule:evenodd;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />
              <path
                 inkscape:connector-curvature="0"
                 id="path6143"
                 d="m 210.03804,197.32403 15.27855,11.99556"
                 style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />
              <path
                 transform="matrix(0.78727459,0.61660256,-0.61660256,0.78727459,0,0)"
                 d="m 299.28993,28.00819 a 3.2198613,3.2198613 0 0 1 -1.61831,2.793304 3.2198613,3.2198613 0 0 1 -3.2282,-0.01454 3.2198613,3.2198613 0 0 1 -1.59308,-2.807769 l 3.21973,0.02901 z"
                 sodipodi:end="3.1506014"
                 sodipodi:start="0"
                 sodipodi:ry="3.2198613"
                 sodipodi:rx="3.2198613"
                 sodipodi:cy="28.00819"
                 sodipodi:cx="296.07007"
                 sodipodi:type="arc"
                 id="path6145"
                 style="opacity:1;fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" />
            </g>
          </g>
        </svg>
        <svg
           id="shoulder"
           width="19.111963mm"
           height="55.808731mm">
           <g
              inkscape:label="Layer 1"
              inkscape:groupmode="layer"
              id="layer1"
              transform="translate(-86.140219,-544.91704)">
             <path
                inkscape:connector-curvature="0"
                style$="opacity:1;fill:[[color]];fill-opacity:0.66842101;fill-rule:evenodd;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
                d="m 137.51524,545.41618 c 0,0 -15.02633,0.88381 -31.0625,4.67188 -16.036166,3.78807 -19.572266,5.42968 -19.572266,5.42968 l 0,0.16602 c 0.13795,0.0155 0.12696,0.0859 0.12696,0.0859 0,0 6.69181,16.79368 8.20703,24.49609 1.51523,7.70242 0.12665,35.86155 -1.00977,44.19531 -1.13642,8.33376 -2.4002,17.04456 -4.16797,25.63088 -1.76776,8.5863 -3.4082,16.03711 -3.4082,16.03711 0,0 -0.1669,-0.0341 -0.17187,-0.0352 0.58009,0.26266 7.17661,3.2307 11.2832,4.07617 4.293136,0.88388 10.607416,2.9043 10.607416,2.9043 0,0 -0.12665,4.16652 1.00977,11.11132 1.13642,6.9448 4.04033,10.85951 3.91406,18.81446 -0.12627,7.95495 -2.72342,21.77124 -7.53265,26.93805 -5.71274,6.13752 -11.912656,7.2807 -11.912656,7.2807 l -2.02149,2.77734 9.559986,2.16825 c 0,0 16.70448,-0.0213 22.26032,-0.65262 5.55583,-0.63134 10.52149,-3.02149 10.52149,-3.02149 l 0.49609,-5.29883 c 0,0 -2.2417,0.57363 -2.87304,-1.69922 -0.63135,-2.27284 0.95898,-4.5664 0.95898,-4.5664 l -0.0703,-2.02539 0.58203,-2.98242 c 0,0 0.92413,-12.36955 2.06054,-18.93555 1.13642,-6.56599 0.27315,-3.15168 1.66211,-8.07617 1.38896,-4.9245 8.24024,-17.3086 8.24024,-17.3086 0,0 7.46367,1.53728 7.96875,-7.80664 0.9278,-17.16424 -1.7668,-25.63387 -3.78711,-39.52346 -2.0203,-13.8896 -4.04093,-27.90427 -6.1875,-47.72851 -2.14657,-19.82425 -5.68164,-37.12305 -5.68164,-37.12305 z"
                id="path4270"
                sodipodi:nodetypes="cscccsssccscssscccsccscccsscssscc" />
           </g>
        </svg>
        <svg
           id="back"
           width="49.429111mm"
           height="9.6650124mm">
           <g
              inkscape:label="Layer 1"
              inkscape:groupmode="layer"
              id="layer1"
              transform="translate(-169.57159,-286.66772)">
             <path
                style$="opacity:1;fill:[[color]];fill-opacity:0.66842101;fill-rule:evenodd;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
                d="m 170.14901,288.53881 c 0,0 6.42857,-1.07143 20.71428,-1.33928 14.28571,-0.26786 74.64285,1.25 81.60715,1.25 6.96429,0 38.21429,0.0893 49.64286,0.89285 11.42857,0.80357 21.33928,3.125 22.05357,4.19643 0.71428,1.07143 -6.78572,6.42857 -4.01786,4.375 2.76786,-2.05357 -7.94643,5.17857 -13.48214,10.44643 -5.53572,5.26786 -9.73214,10.17857 -9.73214,10.17857 0,0 -14.19643,-0.35714 -22.41072,-0.17857 -8.21428,0.17857 -22.67857,-0.26786 -29.73215,-0.35714 -7.05357,-0.0893 -16.875,0.80357 -27.67857,1.25 -10.80357,0.44643 -44.19643,0.98214 -50,1.07143 -5.80357,0.0893 -11.51785,0.0893 -11.51785,0.0893 z"
                id="path4353"
                inkscape:connector-curvature="0" />
           </g>
        </svg>
        <svg
           id="midbut"
           width="40.369438mm"
           height="16.272894mm">
           <g
              inkscape:label="Layer 1"
              inkscape:groupmode="layer"
              id="layer1"
              transform="translate(-88.47934,-352.1037)">
             <path
                inkscape:connector-curvature="0"
                style$="opacity:1;fill:[[color]];fill-opacity:0.66842101;fill-rule:evenodd;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
                d="m 178.45727,352.61021 c -7.05357,-0.0893 -16.87417,0.80357 -27.67774,1.25 -10.80357,0.44643 -44.19643,0.98102 -50,1.07031 -5.803573,0.0893 -11.517563,0.0898 -11.517563,0.0898 l -0.28907,-1.69336 0.28907,1.78321 c 0,0 -0.71569,-1.33901 2.58789,23.48242 3.30356,24.82143 4.2871,30.625 4.2871,30.625 0,0 18.837893,-1.96541 31.337893,-2.67969 12.5,-0.71429 27.94614,-0.62388 34.64257,-1.07031 6.69643,-0.44643 20.00028,-1.87528 29.73244,-2.23242 9.73214,-0.35715 22.85742,-1.51758 22.85742,-1.51758 0,0 -1.16072,-8.03683 0.625,-17.67969 1.78571,-9.64286 5.89342,-17.67829 8.83984,-22.14258 2.94643,-4.46428 6.33985,-8.75 6.33985,-8.75 l -0.12696,-0.004 c -0.36693,-0.009 -14.08962,-0.35004 -22.19531,-0.17383 -8.21428,0.17857 -22.67885,-0.26814 -29.73243,-0.35742 z"
                id="path4355" />
           </g>
        </svg>
        <svg
           id="belly"
           width="38.993431mm"
           height="15.815251mm">
           <g
              inkscape:label="Layer 1"
              inkscape:groupmode="layer"
              id="layer1"
              transform="translate(-125.20286,-767.2002)">
             <path
                inkscape:connector-curvature="0"
                style$="opacity:1;fill:[[color]];fill-opacity:0.66842101;fill-rule:evenodd;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
                d="m 244.68477,767.72314 -0.0996,0.004 c 8.8e-4,0.006 0.0117,0.11133 0.0117,0.11133 0,0 -13.12528,1.16043 -22.85742,1.51758 -9.73216,0.35714 -23.03601,1.78599 -29.73244,2.23242 -6.69643,0.44643 -22.14257,0.35602 -34.64257,1.07031 -12.38993,0.70799 -30.81762,2.6261 -31.14454,2.66016 0.17469,1.15296 0.22607,1.49695 0.34961,2.36719 1.02532,5.76288 2.56017,14.99806 2.83204,19.20507 0.71795,11.11018 0.72857,10.63091 0.18945,16.54102 -0.56821,6.22911 -3.47266,7.26172 -3.47266,7.26172 0,0 0.56984,0.56661 3.72656,1.32422 3.15673,0.75762 22.98085,0.75845 31.88282,0.69531 8.90196,-0.0631 32.70329,-0.63238 40.84765,-1.45313 8.14435,-0.82075 17.23541,-0.0627 28.59962,-3.3457 11.36422,-3.283 6.62996,0.1898 13.13282,-1.00976 6.50285,-1.19955 18.43359,-6.69141 18.43359,-6.69141 0,0 -1.7676,-4.86218 -6.81836,-10.60742 -5.05076,-5.74524 -9.97461,-11.42774 -9.97461,-11.42774 0,0 -0.37963,-6.50232 -0.69531,-12.8789 -0.31567,-6.37659 -0.56836,-7.57618 -0.56836,-7.57618 z m -118.11525,9.9629 c -0.17314,-0.97317 -0.29979,-1.66044 -0.42968,-2.35938 -6.9e-4,7e-5 -0.0779,0.008 -0.0781,0.008 0.81107,4.72374 0.76319,4.15033 0.50781,2.35157 z"
                id="path4396" />
           </g>
        </svg>
        <svg
           id="ham"
           width="24.59742mm"
           height="56.066353mm">
           <g
              inkscape:label="Layer 1"
              inkscape:groupmode="layer"
              id="layer1"
              transform="translate(-331.42189,-433.03205)">
             <path
                inkscape:connector-curvature="0"
                style$="opacity:1;fill:[[color]];fill-opacity:0.66842101;fill-rule:evenodd;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
                d="m 375.44054,433.69152 -0.0684,0.043 c -0.10663,0.88442 -2.42331,2.82164 -3.72851,3.85742 0.12095,-0.0667 0.0799,-0.019 -0.33008,0.28516 -1.00937,0.74888 -0.49523,0.36978 0.33008,-0.28516 -0.69567,0.38366 -9.09673,6.24482 -13.8125,10.73242 -5.53572,5.26786 -9.73243,10.17774 -9.73243,10.17774 -0.14463,0.0234 -0.14463,0.0234 -0.14463,0.0234 l 0.12696,0.004 c 0,0 -3.39342,4.28572 -6.33985,8.75 -2.81255,4.26145 -6.679,11.78036 -8.57812,20.8418 l -1.17188,9.49414 c -0.24433,5.39768 0.23728,9.11282 0.27149,9.35742 l 0.0508,-0.002 c 0,10e-6 0.25269,1.19959 0.56836,7.57618 0.31568,6.37658 0.69531,12.8789 0.69531,12.8789 0,0 4.92385,5.68251 9.97461,11.42775 5.05076,5.74524 6.81836,10.60742 6.81836,10.60742 0,0 -0.0976,0.0431 -0.10156,0.0449 0.0372,0.0766 0.87947,1.80525 1.74414,2.66992 0.88388,0.88388 5.6189,3.21994 7.19726,5.24024 1.32922,1.7014 5.83348,12.60244 6.40821,14.41601 0.91359,1.51505 3.47536,6.33468 4.19726,9.76367 1.01015,4.79823 2.71576,13.13113 1.26367,19.12891 -1.4521,5.99779 -1.95703,9.15625 -1.95703,9.15625 l -5.61914,5.36524 c 0,0 0.37793,2.96763 -0.88476,3.6621 -1.26269,0.69448 -4.60743,1.07227 -4.60743,1.07227 l -2.90429,5.80859 -5.73828,2.90235 -0.17774,1.96484 5.71485,0.53516 15.71289,-0.53516 2.5,-1.60742 9.64257,-0.89258 0.71485,-4.28515 -7.85742,-0.89258 4.10742,-2.5 c 0,0 1.96456,-6.07115 2.85742,-10.89258 0.89286,-4.82143 0.89258,-10.17969 0.89258,-10.17969 l 2.85754,-10.89265 c 0,0 0.53656,-5.71456 4.82227,-14.10742 4.28571,-8.39286 8.39257,-12.85742 8.39257,-12.85742 l -2.85742,-9.46289 c 0,0 7.67802,-11.96457 13.03516,-22.85743 5.35714,-10.89286 6.25,-17.14286 7.5,-26.25 1.25,-9.10715 1.07226,-16.25139 -0.17774,-24.28711 -1.25,-8.03571 -5,-15.71261 -11.25,-22.85547 -6.25,-7.14286 -7.3217,-7.32171 -16.60742,-14.10742 -9.28571,-6.78572 -13.75,-8.03711 -13.75,-8.03711 z m -9.82226,138.14063 c -0.36481,-0.60496 -0.49206,-0.73367 -0.0957,0.041 0.21925,0.42853 0.20343,0.29892 0.0957,-0.041 z"
                id="path4414"
                sodipodi:nodetypes="cccccscccsccccscsccsscssccscccccccccccsccsccssssscccc" />
           </g>
        </svg>
        <svg
           id="tail"
           width="9.4937658mm"
           height="22.518543mm">
           <g
              inkscape:label="Layer 1"
              inkscape:groupmode="layer"
              id="layer1"
              transform="translate(-228.89462,-363.89572)">
             <path
                style$="opacity:1;fill:[[color]];fill-opacity:0.66842101;fill-rule:nonzero;stroke:#000000;stroke-width:1;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"
                d="m 229.44641,364.44032 c 0.0301,0.32977 0.0911,0.65687 0.15821,0.98437 0.95566,2.05365 1.73523,4.13851 2.33203,6.25196 0.25034,0.65499 0.47331,1.30981 0.62304,1.96484 0.45005,3.30217 0.42544,2.90505 2.91602,2.39063 4.85133,0.0794 7.41452,3.92774 9.1582,6.54101 -3.87429,0.67088 -7.62572,2.19826 -10.67383,4.70117 0.0938,4.18409 -0.15379,8.48911 -0.82226,13.35938 -0.16742,1.21978 -0.3299,2.38423 -0.4961,3.51953 0.56399,0.93577 1.34962,1.70229 2.49219,2.14258 2.71526,0.28405 5.47552,-0.70974 8.08008,-1.42383 3.09433,-0.96626 4.35809,-4.03757 5.83203,-6.5957 0.83046,-1.23331 1.39614,-2.57254 1.76563,-3.9668 0.88155,0.94172 1.79132,1.84689 2.84375,2.57812 -3.22478,1.65855 -2.86487,5.68567 -3.21289,8.75 1.02124,2.38671 0.36216,5.40343 2.32031,7.67969 l -4.70117,7.47852 c -1.4932,1.56611 -0.95962,2.40736 1.0332,3.00195 0.89371,3.12808 -0.52662,6.41675 -2.20117,9.03125 -0.49669,1.78385 -5.13127,3.15087 -3.32617,4.86328 l 6.42968,-3.01172 c 1.167,0.1258 0.75869,-2.85744 1.51172,-1.41015 0.309,1.39494 1.48644,0.90724 2.52149,0.72656 0.46482,2.08474 -0.10547,5.98554 1.14453,8.69531 l 2.42578,-3.41601 c 0.88242,-1.55384 2.58523,-2.79022 2.55273,-4.69727 0.50794,-5.50411 1.68121,-10.94575 1.87891,-16.47266 -0.0951,-3.16307 0.23295,-6.42371 -0.44531,-9.51953 -0.813,-3.26958 -3.22491,-5.96766 -3.70118,-9.31054 0.46919,-3.6263 -1.07144,-7.08561 -2.68359,-10.23243 -1.1431,-2.13709 -2.6173,-4.60305 -4.72265,-5.89648 -1.86902,-5.9677 -5.53962,-11.66237 -11.09766,-14.75781 -2.79913,-1.40508 -6.74055,-3.69979 -9.93555,-3.94922 z m 13.79297,24.17187 c 0.35258,-0.0215 0.71035,-0.0142 1.07227,0.0234 0.24788,0.11073 0.48919,0.23055 0.72265,0.35938 -0.17228,1.40963 -0.45038,2.81006 -0.75,4.16601 -1.09747,2.80198 -3.51068,5.86133 -6.79101,5.82813 -4.17235,0.40889 -2.71324,-5.25673 -0.375,-6.70508 1.45004,-1.98818 3.65299,-3.52114 6.12109,-3.67188 z"
                id="rect4495"
                inkscape:connector-curvature="0" />
           </g>
        </svg>
    </iron-pages>

  </template>
  <script>
    Polymer({
      is: 'sl-organ',
      properties: {
        type: {
          type: String,
          observer: '_scale'
        },
        color: {
          type: String
        },
        width: {
          type: Number,
          value: false,
          observer: '_scale',
        },
        height: {
          type: Number,
          value: false,
          observer: '_scale'
        },
        fit:{
          type: Boolean,
          value: false,
          observer: '_scale'
        }
      },

      _organClicked: function(e) {
        this.fire('organClicked', {organ: this})
      },

      _scale: function() {
        if(!this.type)
          return

        var width = this.$[this.type].width.baseVal.value
        var height = this.$[this.type].height.baseVal.value
        if(this.height && this.width && this.fit) {
          //fit into specified width and height
          var newWidth = (this.height/height) * width
          var newHeight = (this.width/width) * height
          if(newWidth <= this.width) {
            newHeight = (newWidth/width) * height
            this.$[this.type].style.left = (this.width - newWidth) / 2
          } else {
            newWidth = (newHeight/height) * width
            this.$[this.type].style.top = (this.height - newHeight) / 2
          }
          this.$[this.type].style.transform = 'scale('
                  + (newWidth/width) + ', ' + newHeight/height + ')';
          this.style.width = this.width + 'px'
          this.style.height = this.height + 'px'
        } else {
          //transform by specified height and width
          if(this.height || this.width) {
            this.style.height = this.height + 'px'
            if(!this.width) {
              this.width = (this.height/height) * width
            } else if (!this.height) {
              this.height = (this.width/width) * height
            }
            this.$[this.type].style.transform = 'scale('
                    + (this.width/width) + ', ' + this.height/height + ')';
          }
          this.style.width = this.width + 'px'
          this.style.height = this.height + 'px'
        }

      }


    });
  </script>
</dom-module>
